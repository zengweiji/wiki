
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title></title>
    <meta charset="utf-8"/>
    <link href="../static/css/common.css?t=12" rel="stylesheet"/>
    <link href="../static/css/main.css" rel="stylesheet"/>

</head>
<body>
<div id="box">
    <div id="top">
        <h1 class="logo"></h1>

        <div class="menu-container">

            <div class="user"><span>ÄúºÃ£¬administrator</span></div>
            <div id="setting" class="setting">
                <span></span>

                <div>
                    <a>ÐÞ¸ÄÃÜÂë</a>
                    <a>ÏµÍ³¹ÜÀí</a>
                    <a>ÍË³öµÇÂ¼</a>
                </div>
            </div>
        </div>
    </div>
    <div id="content">

        <div class="main">
            <div class="story-form-container">
                <strong>½ØÆÁ·Ö×éÍ¼Æ¬ÁÐ±í</strong>
            </div>
            <div class="left" id="panelLeft">

                <div class="creat-grouping-f">
                    <p>

                        <label>
                            <span>ÏîÄ¿£º</span>
                            <select class="form-control">
                                <option value="value">A</option>
                                <option value="value">B</option>
                            </select>
                        </label>
                        <label>
                            <span>¼¶£º</span>
                            <select class="form-control">
                                <option value="value">A</option>
                                <option value="value">B</option>
                            </select>
                        </label>
                        <label>
                            <span>ÎÄ¼þÃû³Æ£º</span>
                            <input type="text" name="name" value="" class="form-control">
                            <button class="btn lans">ËÑË÷</button>
                        </label>
                    </p>
                    
                    <p>
                        <label>
                            <span>·Ö×é£º</span>
                            <select class="form-control">
                                <option value="value">A</option>
                                <option value="value">B</option>
                            </select>
                        </label>
                        <label>
                            <span>±êÇ©£º</span>

                            <input type="text" name="name" value="" class="form-control">
                            <button class="addbtn"></button>
                            <button class="btn lans">±£´æ</button>
                        </label>

                    <p/>
                </div>

                <div class="grouping-box">
                    <div class="grouping-box-wrap">
                        <p><strong class="group-sort inlineblock">A×é</strong>
                            <span class="group-name inlineblock">²¸Èé¶¯Îï</span>
                            <input type="checkbox" name="" class="inlineblock" data-check-target=".id-checkbox-0"
                                   onclick="selectAll(this)">È«Ñ¡
                            <a herf="javascript:;" class="btn-del-group">É¾³ý</a>
                        </p>

                        <div class="grouping-list">
                            <dl class="screenshot-item">
                                <dt><input type="checkbox" name="" class="inlineblock id-checkbox-0"><span class="item-name">0010A001</span>
                                </dt>
                                <dd><span><img src="../static/img/jt.png"></span></dd>
                            </dl>
                            <dl class="screenshot-item">
                                <dt><input type="checkbox" name="" class="inlineblock id-checkbox-0"><span class="item-name">0010A002</span>
                                </dt>
                                <dd><span><img src="../static/img/jt.png"></span></dd>
                            </dl>
                          
                            <dl class="screenshot-item">
                                <dt><input type="checkbox" name="" class="inlineblock id-checkbox-0"><span class="item-name">0010A008</span>
                                </dt>
                                <dd><span><img src="../static/img/jt.png"></span></dd>
                            </dl>
           
                        </div>
                        


                    </div>
                    <div class="grouping-box-wrap">
                        <p><strong class="group-sort inlineblock">B×é</strong>
                            <span class="group-name inlineblock">²¸Èé¶¯Îï</span>
                            <input type="checkbox" name="" class="inlineblock" data-check-target=".id-checkbox-1"
                                   onclick="selectAll(this)">È«Ñ¡
                            <a herf="javascript:;" class="btn-del-group">É¾³ý</a>
                        </p>

                        <div class="grouping-list">
                           
                            <dl class="screenshot-item">
                                <dt><input type="checkbox" name="" class="inlineblock id-checkbox-1"><span class="item-name">0010B007</span>
                                </dt>
                                <dd><span><img src="../static/img/jt.png"></span></dd>
                            </dl>
                            <dl class="screenshot-item">
                                <dt><input type="checkbox" name="" class="inlineblock id-checkbox-1"><span class="item-name">0010B008</span>
                                </dt>
                                <dd><span><img src="../static/img/jt.png"></span></dd>
                            </dl>
                             <dl class="screenshot-item">
                                <dt><input type="checkbox" name="" class="inlineblock id-checkbox-1"><span class="item-name">0010B009</span>
                                </dt>
                                <dd><span><img src="../static/img/jt.png"></span></dd>
                            </dl>
                            <dl class="screenshot-item">
                                <dt><input type="checkbox" name="" class="inlineblock id-checkbox-1"><span class="item-name">0010B010</span>
                                </dt>
                                <dd><span><img src="../static/img/jt.png"></span></dd>
                            </dl>
           
                        </div>
                        


                    </div>
                    <div class="grouping-box-wrap">
                        <p><strong class="group-sort inlineblock">B×é</strong>
                            <span class="group-name inlineblock">²¸Èé¶¯Îï</span>
                            <input type="checkbox" name="" class="inlineblock" data-check-target=".id-checkbox-2"
                                   onclick="selectAll(this)">È«Ñ¡
                            <a herf="javascript:;" class="btn-del-group">É¾³ý</a>
                        </p>

                        <div class="grouping-list">
                           
                            <dl class="screenshot-item">
                                <dt><input type="checkbox" name="" class="inlineblock id-checkbox-2"><span class="item-name">0010B007</span>
                                </dt>
                                <dd><span><img src="../static/img/jt.png"></span></dd>
                            </dl>
    
                        </div>
                        


                    </div>
                    <!-- <div class="grouping-box-wrap">
                        <p><strong class="group-sort inlineblock">B×é</strong> <span
                                class="group-name inlineblock">²¸Èé¶¯Îï</span> <input type="checkbox" class="inlineblock"
                                                                                  data-check-target=".id-checkbox0"
                                                                                  onclick="selectAll(this)">È«Ñ¡</p>
                        <dl class="screenshot-item">
                            <dt><input type="checkbox" name="" class="inlineblock id-checkbox0"><span class="item-name">0010A001</span>
                            </dt>
                            <dd><span><img src="../static/img/jt.png"></span></dd>

                        </dl>
                        <dl class="screenshot-item">
                            <dt><input type="checkbox" name="" class="inlineblock id-checkbox0"><span class="item-name">0010A001</span>
                            </dt>
                            <dd><span><img src="../static/img/jt.png"></span></dd>

                        </dl>
                    </div> -->

                </div>

            </div>

            <div id="panelSwitch"><span class="bar-panel">ÊÕËõ</span></div>

            <div id="panelRight" class="right" style="display: inline-block;">

                <h1 class="panel-title">¾µÍ·ÅúÁ¿²Ù×÷</h1>

                <div class="imginfo">
                    <span>¾µÍ·ÄÑ¶È£º</span>
                    <select class="form-control" id="Difficulty" name="Difficulty">
                        <option value="A+">A+</option>
                        <option value="A">A</option>
                        <option value="B">B</option>
                        <option value="C">C</option>
                        <option value="D">D</option>
                        <option value="E">E</option>
                    </select>
                    <span class="ml10">¾µÍ·ÓÅÏÈ¼¶£º</span>
                    <select class="form-control" id="Priority" name="Priority">
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                    </select>
                </div>
                <div class="imginfo">
                    <span>¾µÍ·ÃèÊö£º</span>
                    <input type="text" name="Description" class="form-control txt-max" id="Description">
                </div>
                <div class="imginfo">
                    <p>ÌØÐ§ÐèÇó£º</p>
                    <textarea rows="2" class="txt-textarea">D£ºÌØÐ§Ãû³Æ1£»C£ºÌØÐ§Ãû³Æ2</textarea>
                </div>
                <div id="assetsInfo" class="assetsInfo">
                    <div id="assetsInfoList"><a>¹¤µØ£¿</a><a>ÉË¿Ú£¿</a><a>ÄÏÚ¯µØ¹¬</a></div>
                    <p class="base"><span>ÌØÐ§ÀàÐÍ£º</span><select class="form-control">
                        <option value="">ÇëÑ¡Ôñ</option>
                        <option value="Assets">Assets</option>
                        <option value="DMP">DMP</option>
                        <option value="Matchmove/ Track">Matchmove/Track</option>
                        <option value="Anim">Anim</option>
                        <option value="Light">Light</option>
                        <option value="Hair">Hair</option>
                        <option value="MG">MG</option>
                        <option value="FX">FX</option>
                        <option value="Roto">Roto</option>
                        <option value="Paint">Paint</option>
                        <option value="Comp">Comp</option>
                    </select><span>Ãû³Æ£º</span><input type="text" class="form-control">
                        <span>ÄÑ¶È£º</span><select class="form-control">
                            <option value="">ÇëÑ¡Ôñ</option>
                            <option value="A">A</option>
                            <option value="B">B</option>
                            <option value="C">C</option>
                            <option value="D">D</option>
                            <option value="E">E</option>
                        </select><span>Manday: </span><input type="text" class="form-control">
                        <a class="add"></a>
                    </p>
                </div>
                <div class="imginfo" style="margin-top:10px;text-align:center;">
                    <a class="btncommon lan" id="btnsave">±£´æ</a>
                    <a class="btncommon lan" id="btncancel">È¡Ïû</a>
                </div>

            </div>
        </div>
    </div>
    <div id="footer">? Copyright 2017 Ê×»ã½¹µã</div>
</div>
<script src="../static/js/jquery-2.1.0.min.js"></script>
<script src="../static/js/main.js"></script>
<script src="../static/js/common.js"></script>
<script type="text/javascript">


    $(function () {

        //groundLayout();
       // $(window).resize(function(){         
           // groundLayout();
        //})
        //·Ö×é²¼¾Ö
        // function groundLayout(){
           
        //     var _left = 10;
        //     var blockHeight = $('.screenshot-item').outerHeight();
        //     var blockWidth = $('.screenshot-item').outerWidth();
     
        //     var num = parseInt($(".grouping-box-wrap").width()/(blockHeight+_left)), left, top, column;
            
        //     var nowNum = 0;       
        //         $('.grouping-list').each(function(){
                  
        //             var $nodeMub = $(this).find(".screenshot-item");
        //             var row = $nodeMub.length/num;
        //             var result = (row.toString()).indexOf(".");
        //             var row = result!=-1?parseInt(row)+1:row;

        //              $(this).css("height",row*(blockHeight+10));

        //             for (var j = 0, k = $nodeMub.length; j < k; j++, nowNum++) {
        //             // ³õÊ¼»¯topµÄÖµ
        //             top = 0;
        //             // »ñÈ¡µ±Ç°ÎªµÚ¼¸ÁÐ
        //             column = j < num ? j : j % num;
        //             // ¼ÆËã¿ÉÒÔµÃµ½µ±Ç°ÁÐµÄLEFTÖµ
        //             left = column * (blockWidth+ 10);
        //             $nodeMub.eq(j).css("left",left+"px");
        //                 if (j < num) {
        //                     // µÚÒ»ÁÐtopÖµÎª0
        //                    $nodeMub.eq(j).css("top","10px");
        //                 } else {
        //                     // ¼ÆËãTOPÖµ£¬µÈÓÚµ±Ç°¸ñ×ÓµÄ¶¥ÉÏÃ¿ÁÐµÄ¸ß¶ÈÏà¼Ó
        //                     for (var m = column; m < j; m = m + num) {
        //                         top = top + $nodeMub.eq(m).outerHeight() + 10;
        //                     }
        //                     $nodeMub.eq(j).css("top",top+"px");
        //                 }
        //             }
        //         })        
         

            
        // }
        //ÕÛµþÃæ°å
        $("#panelSwitch").on("click", function () {

            var $left = $("#panelLeft");
            var $right = $("#panelRight");

            if ($right.css("display") == "none") {

                $right.show();
                $(".main").removeClass("active");
            } else {

                $right.hide();
                $(".main").addClass("active");
            }
             //groundLayout();
        })



        $(document).on('click', '#assetsInfo p a', function () {
            var a = $(this);
            if (a.attr("class") == "add") {
                a.hide();
                var str = "<p class='base'><span>ÌØÐ§ÀàÐÍ£º</span><select class='form-control'><option value=\"\">ÇëÑ¡Ôñ</option><option value=\"Assets\">Assets</option><option value=\"DMP\">DMP</option><option value=\"Matchmove/Track\">Matchmove/Track</option><option value=\"Anim\">Anim</option><option value=\"Light\">Light</option><option value=\"Hair\">Hair</option><option value=\"MG\">MG</option><option value=\"FX\">FX</option><option value=\"Roto\">Roto</option><option value=\"Paint\">Paint</option><option value=\"Comp\">Comp</option></select><span>Ãû³Æ£º</span><input type=\"text\" class='form-control'><span>ÄÑ¶È£º</span><select class='form-control'><option value=\"\">ÇëÑ¡Ôñ</option><option value=\"A\">A</option><option value=\"B\">B</option><option value=\"C\">C</option><option value=\"D\">D</option><option value=\"E\">E</option></select><span>Manday:</span><input type=\"text\" class='form-control'><a class=\"add\"></a><a class=\"del\"></a></p>";
                $("#assetsInfo").append(str);
            } else {
                var p = a.parent();
                if (p.next().length == 0) {
                    p.prev().find("a").show();
                }
                p.remove();
            }

        })

        //É¾³ý·Ö×é×Ó½Úµã
        $(".btn-del-group").on("click",function(){  

                var $checkItems = $(this).parent().next().find(".screenshot-item").find(".id-checkbox:checked");
                $checkItems.parent().parent().remove();
               // groundLayout();
        })


        //ÍÏ·Å
        
        var range = { x: 0, y: 0 };//Êó±êÔªËØÆ«ÒÆÁ¿
        var lastPos = { x: 0, y: 0, x1: 0, y1: 0 }; //ÍÏ×§¶ÔÏóµÄËÄ¸ö×ø±ê

        var theDiv = null, move = false ,singe;//ÍÏ×§¶ÔÏó ÍÏ×§×´Ì¬
        var  theDivHeight = 0, theDivHalf = 0; tarFirstY = 0; //ÍÏ×§¶ÔÏóµÄË÷Òý¡¢¸ß¶È¡¢µÄ³õÊ¼»¯¡£
        var tarDiv = null, tarFirst, tempDiv;  //Òª²åÈëµÄÄ¿±êÔªËØµÄ¶ÔÏó, ÁÙÊ±µÄÐéÏß¶ÔÏó
       
        $(".screenshot-item").each(function(){
            $(this).mousedown(function (event){
                //ÍÏ×§¶ÔÏó
                move = true;
                theDiv = $(this);
               
                //Êó±êÔªËØÏà¶ÔÆ«ÒÆÁ¿
                range.x = event.pageX - theDiv.offset().left;
                range.y = event.pageY - theDiv.offset().top;

                theDivHeight = theDiv.height();
                theDivHalf = theDivHeight/2;
                
          
                theDiv.attr("class","itemdash");

                // ´´½¨ÐÂÔªËØ ²åÈëÍÏ×§ÔªËØÖ®Ç°µÄÎ»ÖÃ(ÐéÏß¿ò)
               // $("<dl class='dash'></dl>").insertBefore(theDiv);
                       
            });
        });
       
        $(document).mousemove(function(event) {       
            if (!move) return false;
           
            lastPos.x = event.pageX - range.x;
            lastPos.y = event.pageY - range.y;
            lastPos.y1 = lastPos.y + theDivHeight;
           
            // ÍÏ×§ÔªËØËæÊó±êÒÆ¶¯
            theDiv.css({left: lastPos.x + 'px',top: lastPos.y + 'px'});
            // ÍÏ×§ÔªËØËæÊó±êÒÆ¶¯ ²éÕÒ²åÈëÄ¿±êÔªËØ
                  

        }).mouseup(function(event) {
            move=false;
             if(theDiv!==null){
             theDiv.attr("class", "screenshot-item"); //恢复对象的初始样式
             }else{
                return false
             }

            if(theDiv.offset().top==lastPos.y){

                return false
            }else{

                $(".grouping-box-wrap").each(function(i){ 
                var boxY = $(this).offset().top;
                var boxMaxY = $(this).offset().top+$(this).height()+$(this).css('marginBottom');

                if(lastPos.y<boxY){   //ÍÏ×§¶ÔÏóÒÆ¶¯×ó±ßÓÚÈÝÆ÷×ø±ê      
                    singe=i;
                    $(".grouping-box-wrap").eq(i-1).find(".grouping-list").prepend(theDiv);
                    return false;                    
                }
                
            });
           if(singe===undefined){

                var num = $(".grouping-box-wrap").length; 
                   //  $(".grouping-box-wrap").eq(num-1).css("border"," 1px dashed #999");
                      $(".grouping-box-wrap").eq(num-1).find(".grouping-list").prepend(theDiv);
                
            }
            }
           
            
            
            
           
         });
    })



</script>

</body>
</html>
